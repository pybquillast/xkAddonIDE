["ultimas", {"AtoZ": {"type": "thread", "numid": 1, "params": {"url": "http://www.novelashdgratis.tv", "regexp": "(?#<div id=\"alfabeto\" .a<href=url *=label>*>)", "compflags": "re.DOTALL|re.IGNORECASE"}, "name": "A - Z", "up": "ultimas"}, "ultimas": {"name": "Ultimas telenovelas agregadas", "numid": 2, "up": "listacapitulos", "down": "rootmenu_ultimas_lnk", "params": {"url": "http://www.novelashdgratis.tv", "regexp": "(?#<div class=\"picture\" a{href=url title=label img.src=iconImage}>)", "compflags": "re.DOTALL|re.IGNORECASE"}, "type": "thread"}, "media": {"down": "urlresolvers", "params": {"url": "https://www.youtube.com/watch?v=Vw8ViaL7-m4", "regexp": "onclick=\"location.href='(?P<videourl>.+?)'\"  value=\"Click Here to Play\" />", "compflags": "re.DOTALL", "enabled": false}, "numid": 3, "type": "thread", "name": "media"}, "rootmenu": {"down": "ultimas_rootmenu_lnk", "params": {"discrim": "option"}, "numid": 4, "type": "list", "name": "rootmenu"}, "rootmenu_ultimas_lnk": {"name": "rootmenu", "numid": 5, "up": "ultimas", "sibling": "AtoZ", "params": {}, "type": "link"}, "ultimas_rootmenu_lnk": {"type": "link", "numid": 6, "params": {"source": true}, "name": "ultimas", "up": "rootmenu"}, "urlresolvers": {"name": "urlresolvers", "numid": 7, "up": "media", "down": "listacapitulos", "params": {"url": "http://www.novelashdgratis.tv/ver/imperio-capitulo-99/", "regexp": "<script>(?P<label>(?P<host>[^(>]+))\\(\\\"(?P<media_id>[^\"]+)\\\"\\)</script>", "compflags": "re.DOTALL", "enabled": false}, "type": "thread"}, "listnovelas": {"name": "Telenovelas que se transmiten", "numid": 8, "up": "listacapitulos", "sibling": "ultimas", "params": {"url": "http://www.novelashdgratis.tv", "regexp": "(?#<li a{href=url title=label}>)", "compflags": "re.DOTALL|re.IGNORECASE"}, "type": "thread"}, "listacapitulos": {"name": "listacapitulos", "numid": 9, "up": "urlresolvers", "down": "listnovelas", "params": {"url": "http://www.novelashdgratis.tv/sin-senos-si-hay-paraiso/", "regexp": "(?#<a href=url *=label class=\"lcc\">)", "compflags": "re.DOTALL|re.IGNORECASE"}, "type": "thread"}}]
{"addon_id": "plugin.video.novelashd", "addon_requires": "xbmc.python,2.1.0,|script.module.urlresolver,2.4.0,|script.module.metahandler,2.9.0,", "addon_name": "Novelas HD Gratis IDE", "addon_resources": "basicFunc.py,resources/lib,True,basicFunc.py|CustomRegEx.py,resources/lib,True,CustomRegEx.py|teleresolvers.py,resources/lib,True,teleresolvers.py|resolverTools.py,resources/lib,True,resolverTools.py", "addon_fanart": "C:/Users/Alex Montes Barrios/git/addonDevelopment/xbmc addon development/src/xbmcUI/images/novelasHD.jpg", "addon_icon": "C:/Users/Alex Montes Barrios/git/addonDevelopment/xbmc addon development/src/xbmcUI/images/novelasHD.png"}
[["addon_changelog", ""], ["addon_module", {"urlresolvers": "def urlresolvers():\n    url = args.get(\"url\")[0]\n    regexp = r'<script>(?P<label>(?P<host>[^(>]+))\\(\\\"(?P<media_id>[^\"]+)\\\"\\)</script>'\n    url, data = openUrl(url)\n    compflags = re.DOTALL\n    subMenus = parseUrlContent(url, data, regexp, compflags)\n    regexp = r'<iframe src=\"https?://(?P<label>(?P<host>[^.]+)).+?(?:\\?ref=|\\?vid=|embed[-/])(?P<media_id>[0-9a-zA-Z]+)'\n    compflags = re.IGNORECASE\n    subMenus += parseUrlContent(url, data, regexp, compflags)\n    menuContent = []\n    for elem in subMenus:\n        itemParam = dict([(key,elem.pop(key)) for key  in elem.keys() if key in LISTITEM_KEYS])\n        itemParam[\"isFolder\"] = False\n        otherParam = {}\n        paramDict = dict([(key, value[0]) for key, value in args.items() if hasattr(value, \"__getitem__\") and key not in [\"header\", \"footer\"]])\n        paramDict.update({'menu': u'media'})\n        paramDict.update(elem)\n        menuContent.append([paramDict, itemParam, otherParam])\n    return menuContent\n", "media": "def media():\n    import re\n    import teleresolvers\n    headers = {'Referer': args.get('url')[0]}\n    host = args.get(\"host\")[0]\n    media_id = args.get(\"media_id\")[0]\n    resolver = getattr(teleresolvers, host, None)\n    if not resolver: return None\n    xbmc.log('Resolver %s with mediaId %s' % (host, media_id))\n    try:\n        url = resolver(media_id, headers)\n    except Exception as e:\n        xbmc.log('Error while resolving media: %s' % e)\n        url = None\n    else:\n        xbmc.log('url solved to %s' % url)\n    li = xbmcgui.ListItem(path = url)\n    if args.get(\"icondef\", None): li.setThumbnailImage(args[\"icondef\"][0])\n    if args.get(\"labeldef\", None): li.setLabel(args[\"labeldef\"][0])\n    li.setProperty('IsPlayable', 'true')\n    li.setProperty('mimetype', 'video/x-msvideo')\n    return xbmcplugin.setResolvedUrl(handle=addon_handle,succeeded=True,listitem=li)\n", "_codeframe_": "<header>\n<rootmenu>\n\n<AtoZ>\n\n<ultimas>\n\n<listnovelas>\n\n<listacapitulos>\n\n<urlresolvers>\n\n\n<media>\n\n\nbase_url = sys.argv[0]\naddon_handle = int(sys.argv[1])\nargs = urlparse.parse_qs(sys.argv[2][1:])\nxbmcplugin.setContent(addon_handle, 'movies')\n\nmenu = args.get('menu', None)\n\nmenuFunc = menu[0] if menu else 'rootmenu'\nmenuItems = eval(menuFunc + '()')\nif menuItems: makeXbmcMenu(addon_handle, base_url, menuItems)\n"}], ["addon_settings", ""]]
