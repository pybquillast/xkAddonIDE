["media", {"AtoZ": {"params": {"url": "http://www.novelashdgratis.tv", "regexp": "(?#<div id=\"alfabeto\" .a<href=url *=label>*>)", "compflags": "re.DOTALL|re.IGNORECASE"}, "type": "thread", "name": "A - Z", "up": "ultimas"}, "ultimas": {"down": "rootmenu_ultimas_lnk", "params": {"url": "http://www.novelashdgratis.tv", "regexp": "(?#<div class=\"picture\" a{href=url title=label img.src=iconImage}>)", "compflags": "re.DOTALL|re.IGNORECASE"}, "type": "thread", "name": "Ultimas telenovelas agregadas", "up": "listacapitulos"}, "media": {"down": "urlresolvers", "type": "thread", "params": {"url": "https://www.youtube.com/watch?v=Vw8ViaL7-m4", "regexp": "onclick=\"location.href='(?P<videourl>.+?)'\"  value=\"Click Here to Play\" />", "compflags": "re.DOTALL", "enabled": false}, "name": "media"}, "rootmenu": {"down": "ultimas_rootmenu_lnk", "type": "list", "params": {"discrim": "option"}, "name": "rootmenu"}, "rootmenu_ultimas_lnk": {"sibling": "AtoZ", "type": "link", "up": "ultimas", "params": {}, "name": "rootmenu"}, "ultimas_rootmenu_lnk": {"params": {"source": true}, "type": "link", "name": "ultimas", "up": "rootmenu"}, "urlresolvers": {"down": "listacapitulos", "params": {"url": "http://www.novelashdgratis.tv/ver/imperio-capitulo-99/", "regexp": "(?#<iframe src=videoUrl webkitallowfullscreen=label>)", "compflags": "re.DOTALL|re.IGNORECASE"}, "type": "thread", "name": "urlresolvers", "up": "media"}, "listnovelas": {"sibling": "ultimas", "type": "thread", "up": "listacapitulos", "params": {"url": "http://www.novelashdgratis.tv", "regexp": "(?#<li a{href=url title=label}>)", "compflags": "re.DOTALL|re.IGNORECASE"}, "name": "Telenovelas que se transmiten"}, "listacapitulos": {"down": "listnovelas", "type": "thread", "params": {"url": "http://www.novelashdgratis.tv/en-nombre-del-honor/", "regexp": "(?#<a href=url title=\"ver .+?\"=label class=\"lcc\">)", "compflags": "re.DOTALL|re.IGNORECASE"}, "name": "listacapitulos", "up": "urlresolvers"}}]
{"addon_id": "plugin.video.novelashd", "addon_requires": "xbmc.python,2.1.0,|script.module.urlresolver,2.4.0,", "addon_name": "Novelas HD Gratis IDE", "addon_resources": "basicFunc.py,resources/lib,True,basicFunc.py|CustomRegEx.py,resources/lib,True,CustomRegEx.py", "addon_fanart": "C:/Users/Alex Montes Barrios/git/addonDevelopment/xbmc addon development/src/xbmcUI/images/novelasHD.jpg", "addon_icon": "C:/Users/Alex Montes Barrios/git/addonDevelopment/xbmc addon development/src/xbmcUI/images/novelasHD.png"}
{"media": "def media():\n    import json, time, xbmcvfs, urllib\n    videoUrl = args.get(\"videoUrl\")[0]\n    id = re.compile('//.+?/(?:embed|f)/([0-9a-zA-Z-_]+)').findall(videoUrl)[0]\n    url = 'https://api.openload.io/1/file/dlticket?file=%s' % id\n    result = openUrl(url)[1]\n    result = json.loads(result)\n    try:\n        cap = result['result']['captcha_url']\n    except:\n        xbmcgui.Dialog().notification('Novelas HD', result['msg'], xbmcgui.NOTIFICATION_ERROR, 10000)\n        return\n    \n    if not cap == None:\n        addonInfo = xbmcaddon.Addon().getAddonInfo('profile')\n        dataPath = xbmc.translatePath(addonInfo).decode('utf-8')\n        if not xbmcvfs.exists(dataPath): xbmcvfs.mkdir(dataPath)\n        i = os.path.join(dataPath,'img')\n        with open(i, \"wb\") as f:\n            f.write(openUrl(cap)[1])\n        f = xbmcgui.ControlImage(450, 0, 400, 130, i)\n        d = xbmcgui.WindowDialog()\n        d.addControl(f)\n        d.show()\n        t = 'Type the letters in the image'\n        k = xbmc.Keyboard('', t)\n        k.doModal()\n        cap = k.getText() if k.isConfirmed() else None\n        if cap == '': cap = None\n        d.removeControl(f)\n        d.close()\n        xbmcvfs.delete(i)\n\n    sleeptime = result['result']['wait_time'] \n    dialog = xbmcgui.Dialog()\n    xbmcgui.Dialog().notification('Novelas HD', 'Waiting to resolve ' + str(sleeptime) + 'seconds', xbmcgui.NOTIFICATION_INFO, sleeptime)\n    time.sleep(sleeptime)\n    url = 'https://api.openload.io/1/file/dl?file=%s&ticket=%s' % (id, result['result']['ticket'])\n    if not cap == None:\n        url += '&captcha_response=%s' % urllib.quote(cap)\n    result = openUrl(url)[1]\n    result = json.loads(result)\n    try:\n        url = result['result']['url'] + '?mime=true'\n    except:\n        xbmcgui.Dialog().notification('Novelas HD', result['msg'], xbmcgui.NOTIFICATION_ERROR, 10000)\n\n    li = xbmcgui.ListItem(path = url)\n    if args.get(\"icondef\", None): li.setThumbnailImage(args[\"icondef\"][0])\n    if args.get(\"labeldef\", None): li.setLabel(args[\"labeldef\"][0])\n    li.setProperty('IsPlayable', 'true')\n    li.setProperty('mimetype', 'video/x-msvideo')\n    return xbmcplugin.setResolvedUrl(handle=addon_handle,succeeded=True,listitem=li)\n"}
